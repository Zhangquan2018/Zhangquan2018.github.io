<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Alphaqzhang&#39;s blog</title>
  
  <subtitle>Welcome to my world!</subtitle>
  <link href="https://zhangquan2018.github.io/atom.xml" rel="self"/>
  
  <link href="https://zhangquan2018.github.io/"/>
  <updated>2021-03-16T15:39:49.996Z</updated>
  <id>https://zhangquan2018.github.io/</id>
  
  <author>
    <name>Zhang Quan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Matminer入门</title>
    <link href="https://zhangquan2018.github.io/2021/03/16/introduction%20to%20matminer/"/>
    <id>https://zhangquan2018.github.io/2021/03/16/introduction%20to%20matminer/</id>
    <published>2021-03-16T15:04:02.961Z</published>
    <updated>2021-03-16T15:39:49.996Z</updated>
    
    <content type="html"><![CDATA[<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pymatgen<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>pymatgen<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> 2021.2.16</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> matminer<span class="token punctuation">.</span>datasets <span class="token keyword">import</span> get_available_datasetsget_available_datasets<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>  boltztrap_mp: Effective mass and thermoelectric properties of 8924 compounds in The  Materials Project database that are calculated by the BoltzTraP software package run on the GGA-PBE or GGA+U density functional theory calculation results. The properties are reported at the temperature of 300 Kelvin and the carrier concentration of 1e18 1/cm3.</p><p>  brgoch_superhard_training: 2574 materials used for training regressors that predict shear and bulk modulus.<br>  castelli_perovskites: 18,928 perovskites generated with ABX combinatorics, calculating gllbsc band gap and pbe structure, and also reporting absolute band edge positions and heat of formation.</p><p>  citrine_thermal_conductivity: Thermal conductivity of 872 compounds measured experimentally and retrieved from Citrine database from various references. The reported values are measured at various temperatures of which 295 are at room temperature.</p><p>  dielectric_constant: 1,056 structures with dielectric properties, calculated with DFPT-PBE.</p><p>  double_perovskites_gap: Band gap of 1306 double perovskites (a_1-b_1-a_2-b_2-O6) calculated using ﻿Gritsenko, van Leeuwen, van Lenthe and Baerends potential (gllbsc) in GPAW.</p><p>  double_perovskites_gap_lumo: Supplementary lumo data of 55 atoms for the double_perovskites_gap dataset.</p><p>  elastic_tensor_2015: 1,181 structures with elastic properties calculated with DFT-PBE.</p><p>  expt_formation_enthalpy: Experimental formation enthalpies for inorganic compounds, collected from years of calorimetric experiments. There are 1,276 entries in this dataset, mostly binary compounds. Matching mpids or oqmdids as well as the DFT-computed formation energies are also added (if any).</p><p>  expt_gap: Experimental band gap of 6354 inorganic semiconductors.</p><p>  flla: 3938 structures and computed formation energies from “Crystal Structure Representations for Machine Learning Models of Formation Energies.”</p><p>  glass_binary: Metallic glass formation data for binary alloys, collected from various experimental techniques such as melt-spinning or mechanical alloying. This dataset covers all compositions with an interval of 5 at. % in 59 binary systems, containing a total of 5959 alloys in the dataset. The target property of this dataset is the glass forming ability (GFA), i.e. whether the composition can form monolithic glass or not, which is either 1 for glass forming or 0 for non-full glass forming.</p><p>  glass_binary_v2: Identical to glass_binary dataset, but with duplicate entries merged. If there was a disagreement in gfa when merging the class was defaulted to 1.</p><p>  glass_ternary_hipt: Metallic glass formation dataset for ternary alloys, collected from the high-throughput sputtering experiments measuring whether it is possible to form a glass using sputtering. The hipt experimental data are of the Co-Fe-Zr, Co-Ti-Zr, Co-V-Zr and Fe-Ti-Nb ternary systems.</p><p>  glass_ternary_landolt: Metallic glass formation dataset for ternary alloys, collected from the “Nonequilibrium Phase Diagrams of Ternary Amorphous Alloys,’ a volume of the Landolt– Börnstein collection. This dataset contains experimental measurements of whether it is possible to form a glass using a variety of processing techniques at thousands of compositions from hundreds of ternary systems. The processing techniques are designated in the “processing” column. There are originally 7191 experiments in this dataset, will be reduced to 6203 after deduplicated, and will be further reduced to 6118 if combining multiple data for one composition. There are originally 6780 melt-spinning experiments in this dataset, will be reduced to 5800 if deduplicated, and will be further reduced to 5736 if combining multiple experimental data for one composition.</p><p>  heusler_magnetic: 1153 Heusler alloys with DFT-calculated magnetic and electronic properties. The 1153 alloys include 576 full, 449 half and 128 inverse Heusler alloys. The data are extracted and cleaned (including de-duplicating) from Citrine.</p><p>  jarvis_dft_2d: Various properties of 636 2D materials computed with the OptB88vdW and TBmBJ functionals taken from the JARVIS DFT database.</p><p>  jarvis_dft_3d: Various properties of 25,923 bulk materials computed with the OptB88vdW and TBmBJ functionals taken from the JARVIS DFT database.</p><p>  jarvis_ml_dft_training: Various properties of 24,759 bulk and 2D materials computed with the OptB88vdW and TBmBJ functionals taken from the JARVIS DFT database.</p><p>  m2ax: Elastic properties of 223 stable M2AX compounds from “A comprehensive survey of M2AX phase elastic properties” by Cover et al. Calculations are PAW PW91.</p><p>  matbench_dielectric: Matbench v0.1 test dataset for predicting refractive index from structure. Adapted from Materials Project database. Removed entries having a formation energy (or energy above the convex hull) more than 150meV and those having refractive indices less than 1 and those containing noble gases. Retrieved April 2, 2019. For benchmarking w/ nested cross validation, the order of the dataset must be identical to the retrieved data; refer to the Automatminer/Matbench publication for more details.</p><p>  matbench_expt_gap: Matbench v0.1 test dataset for predicting experimental band gap from composition alone. Retrieved from Zhuo et al. supplementary information. Deduplicated according to composition, removing compositions with reported band gaps spanning more than a 0.1eV range; remaining compositions were assigned values based on the closest experimental value to the mean experimental value for that composition among all reports. For benchmarking w/ nested cross validation, the order of the dataset must be identical to the retrieved data; refer to the Automatminer/Matbench publication for more details.</p><p>  matbench_expt_is_metal: Matbench v0.1 test dataset for classifying metallicity from composition alone. Retrieved from Zhuo et al. supplementary information. Deduplicated according to composition, ensuring no conflicting reports were entered for any compositions (i.e., no reported compositions were both metal and nonmetal). For benchmarking w/ nested cross validation, the order of the dataset must be identical to the retrieved data; refer to the Automatminer/Matbench publication for more details.</p><p>  matbench_glass: Matbench v0.1 test dataset for predicting full bulk metallic glass formation ability from chemical formula. Retrieved from “Nonequilibrium Phase Diagrams of Ternary Amorphous Alloys,’ a volume of the Landolt– Börnstein collection. Deduplicated according to composition, ensuring no compositions were reported as both GFA and not GFA (i.e., all reports agreed on the classification designation). For benchmarking w/ nested cross validation, the order of the dataset must be identical to the retrieved data; refer to the Automatminer/Matbench publication for more details.</p><p>  matbench_jdft2d: Matbench v0.1 test dataset for predicting exfoliation energies from crystal structure (computed with the OptB88vdW and TBmBJ functionals). Adapted from the JARVIS DFT database. For benchmarking w/ nested cross validation, the order of the dataset must be identical to the retrieved data; refer to the Automatminer/Matbench publication for more details.</p><p>  matbench_log_gvrh: Matbench v0.1 test dataset for predicting DFT log10 VRH-average shear modulus from structure. Adapted from Materials Project database. Removed entries having a formation energy (or energy above the convex hull) more than 150meV and those having negative G_Voigt, G_Reuss, G_VRH, K_Voigt, K_Reuss, or K_VRH and those failing G_Reuss &lt;= G_VRH &lt;= G_Voigt or K_Reuss &lt;= K_VRH &lt;= K_Voigt and those containing noble gases. Retrieved April 2, 2019. For benchmarking w/ nested cross validation, the order of the dataset must be identical to the retrieved data; refer to the Automatminer/Matbench publication for more details.</p><p>  matbench_log_kvrh: Matbench v0.1 test dataset for predicting DFT log10 VRH-average bulk modulus from structure. Adapted from Materials Project database. Removed entries having a formation energy (or energy above the convex hull) more than 150meV and those having negative G_Voigt, G_Reuss, G_VRH, K_Voigt, K_Reuss, or K_VRH and those failing G_Reuss &lt;= G_VRH &lt;= G_Voigt or K_Reuss &lt;= K_VRH &lt;= K_Voigt and those containing noble gases. Retrieved April 2, 2019. For benchmarking w/ nested cross validation, the order of the dataset must be identical to the retrieved data; refer to the Automatminer/Matbench publication for more details.</p><p>  matbench_mp_e_form: Matbench v0.1 test dataset for predicting DFT formation energy from structure. Adapted from Materials Project database. Removed entries having formation energy more than 3.0eV and those containing noble gases. Retrieved April 2, 2019. For benchmarking w/ nested cross validation, the order of the dataset must be identical to the retrieved data; refer to the Automatminer/Matbench publication for more details.</p><p>  matbench_mp_gap: Matbench v0.1 test dataset for predicting DFT PBE band gap from structure. Adapted from Materials Project database. Removed entries having a formation energy (or energy above the convex hull) more than 150meV and those containing noble gases. Retrieved April 2, 2019. For benchmarking w/ nested cross validation, the order of the dataset must be identical to the retrieved data; refer to the Automatminer/Matbench publication for more details.</p><p>  matbench_mp_is_metal: Matbench v0.1 test dataset for predicting DFT metallicity from structure. Adapted from Materials Project database. Removed entries having a formation energy (or energy above the convex hull) more than 150meV and those containing noble gases. Retrieved April 2, 2019. For benchmarking w/ nested cross validation, the order of the dataset must be identical to the retrieved data; refer to the Automatminer/Matbench publication for more details.</p><p>  matbench_perovskites: Matbench v0.1 test dataset for predicting formation energy from crystal structure. Adapted from an original dataset generated by Castelli et al. For benchmarking w/ nested cross validation, the order of the dataset must be identical to the retrieved data; refer to the Automatminer/Matbench publication for more details.</p><p>  matbench_phonons: Matbench v0.1 test dataset for predicting vibration properties from crystal structure. Original data retrieved from Petretto et al. Original calculations done via ABINIT in the harmonic approximation based on density functional perturbation theory. Removed entries having a formation energy (or energy above the convex hull) more than 150meV. For benchmarking w/ nested cross validation, the order of the dataset must be identical to the retrieved data; refer to the Automatminer/Matbench publication for more details.</p><p>  matbench_steels: Matbench v0.1 test dataset for predicting steel yield strengths from chemical composition alone. Retrieved from Citrine informatics. Deduplicated. For benchmarking w/ nested cross validation, the order of the dataset must be identical to the retrieved data; refer to the Automatminer/Matbench publication for more details.</p><p>  mp_all_20181018: A complete copy of the Materials Project database as of 10/18/2018. mp_all files contain structure data for each material while mp_nostruct does not.</p><p>  mp_nostruct_20181018: A complete copy of the Materials Project database as of 10/18/2018. mp_all files contain structure data for each material while mp_nostruct does not.</p><p>  phonon_dielectric_mp: Phonon (lattice/atoms vibrations) and dielectric properties of 1296 compounds computed via ABINIT software package in the harmonic approximation based on density functional perturbation theory.</p><p>  piezoelectric_tensor: 941 structures with piezoelectric properties, calculated with DFT-PBE.</p><p>  steel_strength: 312 steels with experimental yield strength and ultimate tensile strength, extracted and cleaned (including de-duplicating) from Citrine.</p><p>  wolverton_oxides: 4,914 perovskite oxides containing composition data, lattice constants, and formation + vacancy formation energies. All perovskites are of the form ABO3. Adapted from a dataset presented by Emery and Wolverton.</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token string">'boltztrap_mp'</span>, <span class="token string">'brgoch_superhard_training'</span>, <span class="token string">'castelli_perovskites'</span>, <span class="token string">'citrine_thermal_conductivity'</span>, <span class="token string">'dielectric_constant'</span>, <span class="token string">'double_perovskites_gap'</span>, <span class="token string">'double_perovskites_gap_lumo'</span>, <span class="token string">'elastic_tensor_2015'</span>, <span class="token string">'expt_formation_enthalpy'</span>, <span class="token string">'expt_gap'</span>, <span class="token string">'flla'</span>, <span class="token string">'glass_binary'</span>, <span class="token string">'glass_binary_v2'</span>, <span class="token string">'glass_ternary_hipt'</span>, <span class="token string">'glass_ternary_landolt'</span>, <span class="token string">'heusler_magnetic'</span>, <span class="token string">'jarvis_dft_2d'</span>, <span class="token string">'jarvis_dft_3d'</span>, <span class="token string">'jarvis_ml_dft_training'</span>, <span class="token string">'m2ax'</span>, <span class="token string">'matbench_dielectric'</span>, <span class="token string">'matbench_expt_gap'</span>, <span class="token string">'matbench_expt_is_metal'</span>, <span class="token string">'matbench_glass'</span>, <span class="token string">'matbench_jdft2d'</span>, <span class="token string">'matbench_log_gvrh'</span>, <span class="token string">'matbench_log_kvrh'</span>, <span class="token string">'matbench_mp_e_form'</span>, <span class="token string">'matbench_mp_gap'</span>, <span class="token string">'matbench_mp_is_metal'</span>, <span class="token string">'matbench_perovskites'</span>, <span class="token string">'matbench_phonons'</span>, <span class="token string">'matbench_steels'</span>, <span class="token string">'mp_all_20181018'</span>, <span class="token string">'mp_nostruct_20181018'</span>, <span class="token string">'phonon_dielectric_mp'</span>, <span class="token string">'piezoelectric_tensor'</span>, <span class="token string">'steel_strength'</span>, <span class="token string">'wolverton_oxides'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> matminer<span class="token punctuation">.</span>datasets <span class="token keyword">import</span> load_datasetdf <span class="token operator">=</span> load_dataset<span class="token punctuation">(</span><span class="token string">"dielectric_constant"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>  Fetching dielectric_constant.json.gz from <a href="https://ndownloader.figshare.com/files/13213475">https://ndownloader.figshare.com/files/13213475</a> to C:\ProgramData\Anaconda3\lib\site-packages\matminer\datasets\dielectric_constant.json.gz</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }<pre><code>.dataframe tbody tr th &#123;    vertical-align: top;&#125;.dataframe thead th &#123;    text-align: right;&#125;</code></pre><p></style></p><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>material_id</th>      <th>formula</th>      <th>nsites</th>      <th>space_group</th>      <th>volume</th>      <th>structure</th>      <th>band_gap</th>      <th>e_electronic</th>      <th>e_total</th>      <th>n</th>      <th>poly_electronic</th>      <th>poly_total</th>      <th>pot_ferroelectric</th>      <th>cif</th>      <th>meta</th>      <th>poscar</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>mp-441</td>      <td>Rb2Te</td>      <td>3</td>      <td>225</td>      <td>159.501208</td>      <td>[[1.75725875 1.2425695  3.04366125] Rb, [5.271...</td>      <td>1.88</td>      <td>[[3.44115795, -3.097e-05, -6.276e-05], [-2.837...</td>      <td>[[6.23414745, -0.00035252, -9.796e-05], [-0.00...</td>      <td>1.86</td>      <td>3.44</td>      <td>6.23</td>      <td>False</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>      <td>Rb2 Te1\n1.0\n5.271776 0.000000 3.043661\n1.75...</td>    </tr>    <tr>      <th>1</th>      <td>mp-22881</td>      <td>CdCl2</td>      <td>3</td>      <td>166</td>      <td>84.298097</td>      <td>[[0. 0. 0.] Cd, [ 4.27210959  2.64061969 13.13...</td>      <td>3.52</td>      <td>[[3.34688382, -0.04498543, -0.22379197], [-0.0...</td>      <td>[[7.97018673, -0.29423886, -1.463590159999999]...</td>      <td>1.78</td>      <td>3.16</td>      <td>6.73</td>      <td>False</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>      <td>Cd1 Cl2\n1.0\n3.850977 0.072671 5.494462\n1.78...</td>    </tr>    <tr>      <th>2</th>      <td>mp-28013</td>      <td>MnI2</td>      <td>3</td>      <td>164</td>      <td>108.335875</td>      <td>[[0. 0. 0.] Mn, [-2.07904300e-06  2.40067320e+...</td>      <td>1.17</td>      <td>[[5.5430849, -5.28e-06, -2.5030000000000003e-0...</td>      <td>[[13.80606079, 0.0006911900000000001, 9.655e-0...</td>      <td>2.23</td>      <td>4.97</td>      <td>10.64</td>      <td>False</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>      <td>Mn1 I2\n1.0\n4.158086 0.000000 0.000000\n-2.07...</td>    </tr>    <tr>      <th>3</th>      <td>mp-567290</td>      <td>LaN</td>      <td>4</td>      <td>186</td>      <td>88.162562</td>      <td>[[-1.73309900e-06  2.38611186e+00  5.95256328e...</td>      <td>1.12</td>      <td>[[7.09316738, 7.99e-06, -0.0003864700000000000...</td>      <td>[[16.79535386, 8.199999999999997e-07, -0.00948...</td>      <td>2.65</td>      <td>7.04</td>      <td>17.99</td>      <td>False</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>      <td>La2 N2\n1.0\n4.132865 0.000000 0.000000\n-2.06...</td>    </tr>    <tr>      <th>4</th>      <td>mp-560902</td>      <td>MnF2</td>      <td>6</td>      <td>136</td>      <td>82.826401</td>      <td>[[1.677294 2.484476 2.484476] Mn, [0. 0. 0.] M...</td>      <td>2.87</td>      <td>[[2.4239622, 7.452000000000001e-05, 6.06100000...</td>      <td>[[6.44055613, 0.0020446600000000002, 0.0013203...</td>      <td>1.53</td>      <td>2.35</td>      <td>7.12</td>      <td>False</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLDAUTYPE ...</td>      <td>Mn2 F4\n1.0\n3.354588 0.000000 0.000000\n0.000...</td>    </tr>  </tbody></table></div><pre class="line-numbers language-python" data-language="python"><code class="language-python">df<span class="token punctuation">.</span>columns<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>输出：</strong></p><pre class="line-numbers language-text" data-language="text"><code class="language-text">Index([&#39;material_id&#39;, &#39;formula&#39;, &#39;nsites&#39;, &#39;space_group&#39;, &#39;volume&#39;,          &#39;structure&#39;, &#39;band_gap&#39;, &#39;e_electronic&#39;, &#39;e_total&#39;, &#39;n&#39;,          &#39;poly_electronic&#39;, &#39;poly_total&#39;, &#39;pot_ferroelectric&#39;, &#39;cif&#39;, &#39;meta&#39;,          &#39;poscar&#39;],        dtype&#x3D;&#39;object&#39;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">df<span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }<pre><code>.dataframe tbody tr th &#123;    vertical-align: top;&#125;.dataframe thead th &#123;    text-align: right;&#125;</code></pre><p></style></p><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>nsites</th>      <th>space_group</th>      <th>volume</th>      <th>band_gap</th>      <th>n</th>      <th>poly_electronic</th>      <th>poly_total</th>    </tr>  </thead>  <tbody>    <tr>      <th>count</th>      <td>1056.000000</td>      <td>1056.000000</td>      <td>1056.000000</td>      <td>1056.000000</td>      <td>1056.000000</td>      <td>1056.000000</td>      <td>1056.000000</td>    </tr>    <tr>      <th>mean</th>      <td>7.530303</td>      <td>142.970644</td>      <td>166.420376</td>      <td>2.119432</td>      <td>2.434886</td>      <td>7.248049</td>      <td>14.777898</td>    </tr>    <tr>      <th>std</th>      <td>3.388443</td>      <td>67.264591</td>      <td>97.425084</td>      <td>1.604924</td>      <td>1.148849</td>      <td>13.054947</td>      <td>19.435303</td>    </tr>    <tr>      <th>min</th>      <td>2.000000</td>      <td>1.000000</td>      <td>13.980548</td>      <td>0.110000</td>      <td>1.280000</td>      <td>1.630000</td>      <td>2.080000</td>    </tr>    <tr>      <th>25%</th>      <td>5.000000</td>      <td>82.000000</td>      <td>96.262337</td>      <td>0.890000</td>      <td>1.770000</td>      <td>3.130000</td>      <td>7.557500</td>    </tr>    <tr>      <th>50%</th>      <td>8.000000</td>      <td>163.000000</td>      <td>145.944691</td>      <td>1.730000</td>      <td>2.190000</td>      <td>4.790000</td>      <td>10.540000</td>    </tr>    <tr>      <th>75%</th>      <td>9.000000</td>      <td>194.000000</td>      <td>212.106405</td>      <td>2.885000</td>      <td>2.730000</td>      <td>7.440000</td>      <td>15.482500</td>    </tr>    <tr>      <th>max</th>      <td>20.000000</td>      <td>229.000000</td>      <td>597.341134</td>      <td>8.320000</td>      <td>16.030000</td>      <td>256.840000</td>      <td>277.780000</td>    </tr>  </tbody></table></div><pre class="line-numbers language-python" data-language="python"><code class="language-python">df <span class="token punctuation">[</span><span class="token string">"band_gap"</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>输出：</strong></p><pre class="line-numbers language-text" data-language="text"><code class="language-text">0       1.881       3.522       1.173       1.124       2.87        ... 1051    0.871052    3.601053    0.141054    0.211055    0.26Name: band_gap, Length: 1056, dtype: float64<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>输出：</strong></p><pre class="line-numbers language-text" data-language="text"><code class="language-text">material_id                                                    mp-7140formula                                                            SiCnsites                                                               4space_group                                                        186volume                                                         42.0055structure            [[-1.87933700e-06  1.78517223e+00  2.53458835e...band_gap                                                           2.3e_electronic         [[6.9589498, -3.29e-06, 0.0014472600000000001]...e_total              [[10.193825310000001, -3.7090000000000006e-05,...n                                                                 2.66poly_electronic                                                   7.08poly_total                                                       10.58pot_ferroelectric                                                Falsecif                  #\#CIF1.1\n###################################...meta                 &#123;u&#39;incar&#39;: u&#39;NELM &#x3D; 100\nIBRION &#x3D; 8\nLWAVE &#x3D; F...poscar               Si2 C2\n1.0\n3.092007 0.000000 0.000000\n-1.54...Name: 100, dtype: object<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">mask <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">"volume"</span><span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">580</span>df <span class="token punctuation">[</span>mask<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }<pre><code>.dataframe tbody tr th &#123;    vertical-align: top;&#125;.dataframe thead th &#123;    text-align: right;&#125;</code></pre><p></style></p><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>material_id</th>      <th>formula</th>      <th>nsites</th>      <th>space_group</th>      <th>volume</th>      <th>structure</th>      <th>band_gap</th>      <th>e_electronic</th>      <th>e_total</th>      <th>n</th>      <th>poly_electronic</th>      <th>poly_total</th>      <th>pot_ferroelectric</th>      <th>cif</th>      <th>meta</th>      <th>poscar</th>    </tr>  </thead>  <tbody>    <tr>      <th>206</th>      <td>mp-23280</td>      <td>AsCl3</td>      <td>16</td>      <td>19</td>      <td>582.085309</td>      <td>[[0.13113333 7.14863883 9.63476955] As, [2.457...</td>      <td>3.99</td>      <td>[[2.2839161900000002, 0.00014519, -2.238000000...</td>      <td>[[2.49739759, 0.00069379, 0.00075864], [0.0004...</td>      <td>1.57</td>      <td>2.47</td>      <td>3.30</td>      <td>False</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>      <td>As4 Cl12\n1.0\n4.652758 0.000000 0.000000\n0.0...</td>    </tr>    <tr>      <th>216</th>      <td>mp-9064</td>      <td>RbTe</td>      <td>12</td>      <td>189</td>      <td>590.136085</td>      <td>[[6.61780282 0.         0.        ] Rb, [1.750...</td>      <td>0.43</td>      <td>[[3.25648277, 5.9650000000000007e-05, 1.57e-06...</td>      <td>[[5.34517928, 0.00022474000000000002, -0.00018...</td>      <td>2.05</td>      <td>4.20</td>      <td>6.77</td>      <td>False</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>      <td>Rb6 Te6\n1.0\n10.118717 0.000000 0.000000\n-5....</td>    </tr>    <tr>      <th>219</th>      <td>mp-23230</td>      <td>PCl3</td>      <td>16</td>      <td>62</td>      <td>590.637274</td>      <td>[[6.02561815 8.74038483 7.55586375] P, [2.7640...</td>      <td>4.03</td>      <td>[[2.39067769, 0.00017593, 8.931000000000001e-0...</td>      <td>[[2.80467218, 0.00034093000000000003, 0.000692...</td>      <td>1.52</td>      <td>2.31</td>      <td>2.76</td>      <td>False</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>      <td>P4 Cl12\n1.0\n6.523152 0.000000 0.000000\n0.00...</td>    </tr>    <tr>      <th>251</th>      <td>mp-2160</td>      <td>Sb2Se3</td>      <td>20</td>      <td>62</td>      <td>597.341134</td>      <td>[[3.02245275 0.42059268 1.7670481 ] Sb, [ 1.00...</td>      <td>0.76</td>      <td>[[19.1521058, 5.5e-06, 0.00025268], [-1.078000...</td>      <td>[[81.93819038000001, 0.0006755800000000001, 0....</td>      <td>3.97</td>      <td>15.76</td>      <td>63.53</td>      <td>True</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>      <td>Sb8 Se12\n1.0\n4.029937 0.000000 0.000000\n0.0...</td>    </tr>  </tbody></table></div><pre class="line-numbers language-python" data-language="python"><code class="language-python">cleaned_df <span class="token operator">=</span> df<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"nsites"</span><span class="token punctuation">,</span><span class="token string">"space_group"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> axis <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>cleaned_df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }<pre><code>.dataframe tbody tr th &#123;    vertical-align: top;&#125;.dataframe thead th &#123;    text-align: right;&#125;</code></pre><p></style></p><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>material_id</th>      <th>formula</th>      <th>volume</th>      <th>structure</th>      <th>band_gap</th>      <th>e_electronic</th>      <th>e_total</th>      <th>n</th>      <th>poly_electronic</th>      <th>poly_total</th>      <th>pot_ferroelectric</th>      <th>cif</th>      <th>meta</th>      <th>poscar</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>mp-441</td>      <td>Rb2Te</td>      <td>159.501208</td>      <td>[[1.75725875 1.2425695  3.04366125] Rb, [5.271...</td>      <td>1.88</td>      <td>[[3.44115795, -3.097e-05, -6.276e-05], [-2.837...</td>      <td>[[6.23414745, -0.00035252, -9.796e-05], [-0.00...</td>      <td>1.86</td>      <td>3.44</td>      <td>6.23</td>      <td>False</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>      <td>Rb2 Te1\n1.0\n5.271776 0.000000 3.043661\n1.75...</td>    </tr>    <tr>      <th>1</th>      <td>mp-22881</td>      <td>CdCl2</td>      <td>84.298097</td>      <td>[[0. 0. 0.] Cd, [ 4.27210959  2.64061969 13.13...</td>      <td>3.52</td>      <td>[[3.34688382, -0.04498543, -0.22379197], [-0.0...</td>      <td>[[7.97018673, -0.29423886, -1.463590159999999]...</td>      <td>1.78</td>      <td>3.16</td>      <td>6.73</td>      <td>False</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>      <td>Cd1 Cl2\n1.0\n3.850977 0.072671 5.494462\n1.78...</td>    </tr>    <tr>      <th>2</th>      <td>mp-28013</td>      <td>MnI2</td>      <td>108.335875</td>      <td>[[0. 0. 0.] Mn, [-2.07904300e-06  2.40067320e+...</td>      <td>1.17</td>      <td>[[5.5430849, -5.28e-06, -2.5030000000000003e-0...</td>      <td>[[13.80606079, 0.0006911900000000001, 9.655e-0...</td>      <td>2.23</td>      <td>4.97</td>      <td>10.64</td>      <td>False</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>      <td>Mn1 I2\n1.0\n4.158086 0.000000 0.000000\n-2.07...</td>    </tr>    <tr>      <th>3</th>      <td>mp-567290</td>      <td>LaN</td>      <td>88.162562</td>      <td>[[-1.73309900e-06  2.38611186e+00  5.95256328e...</td>      <td>1.12</td>      <td>[[7.09316738, 7.99e-06, -0.0003864700000000000...</td>      <td>[[16.79535386, 8.199999999999997e-07, -0.00948...</td>      <td>2.65</td>      <td>7.04</td>      <td>17.99</td>      <td>False</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLWAVE = F...</td>      <td>La2 N2\n1.0\n4.132865 0.000000 0.000000\n-2.06...</td>    </tr>    <tr>      <th>4</th>      <td>mp-560902</td>      <td>MnF2</td>      <td>82.826401</td>      <td>[[1.677294 2.484476 2.484476] Mn, [0. 0. 0.] M...</td>      <td>2.87</td>      <td>[[2.4239622, 7.452000000000001e-05, 6.06100000...</td>      <td>[[6.44055613, 0.0020446600000000002, 0.0013203...</td>      <td>1.53</td>      <td>2.35</td>      <td>7.12</td>      <td>False</td>      <td>#\#CIF1.1\n###################################...</td>      <td>{u'incar': u'NELM = 100\nIBRION = 8\nLDAUTYPE ...</td>      <td>Mn2 F4\n1.0\n3.354588 0.000000 0.000000\n0.000...</td>    </tr>  </tbody></table></div>]]></content>
    
    
      
      
    <summary type="html">&lt;pre class=&quot;line-numbers language-python&quot; data-language=&quot;python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; pym</summary>
      
    
    
    
    <category term="Machine Learning" scheme="https://zhangquan2018.github.io/categories/Machine-Learning/"/>
    
    
    <category term="Machine Learning" scheme="https://zhangquan2018.github.io/tags/Machine-Learning/"/>
    
    <category term="Matminer" scheme="https://zhangquan2018.github.io/tags/Matminer/"/>
    
  </entry>
  
  <entry>
    <title>VASP INCAR设置</title>
    <link href="https://zhangquan2018.github.io/2021/03/14/INCAR%E8%AE%BE%E7%BD%AE/"/>
    <id>https://zhangquan2018.github.io/2021/03/14/INCAR%E8%AE%BE%E7%BD%AE/</id>
    <published>2021-03-14T15:29:46.801Z</published>
    <updated>2021-03-18T14:27:56.526Z</updated>
    
    <content type="html"><![CDATA[<h1 id="INCAR设置"><a href="#INCAR设置" class="headerlink" title="INCAR设置"></a>INCAR设置</h1><p><strong>金属</strong>：ISMEAR = 1; SIGMA = 0.2（grep “entropy T” OUTCAR 除以原子数与 0.001eV比较；若小于0.001，则OK，否则该SIGMA）</p><p><strong>绝缘体或半导体</strong>： ISMEAR = 0;SIGMA = 0.05</p><p><strong>DOS</strong>  :ISMEAR = -5;  SIGMA的值可忽略</p><p><strong>分子计算</strong>：ISMEAER = 0；SIGMA = 0.01</p><p><strong>KPOINTS取值：</strong></p><p>ka~30埃，for d band metals</p><p>ka~25埃，for simple metals</p><p>ka~20埃，for semiconductors</p><p>ka~15埃，for insulators</p><p><strong>几何结构优化</strong>：EDIFF = 1E-5</p><p><strong>过渡态和频率计算</strong>：EDIFF = 1E-6或1E-7</p><h2 id="磁性计算"><a href="#磁性计算" class="headerlink" title="磁性计算"></a>磁性计算</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">SYSTEM <span class="token operator">=</span> N2PENCUT <span class="token operator">=</span> <span class="token number">520</span>ISTART <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ICHARG <span class="token operator">=</span> <span class="token number">2</span>ISMEAR <span class="token operator">=</span> <span class="token number">0</span><span class="token assign-left variable">SIGMA</span><span class="token operator">=</span><span class="token number">0.05</span><span class="token assign-left variable">NSW</span><span class="token operator">=</span><span class="token number">100</span><span class="token comment">#PRECSYM=0.01</span>IBRION <span class="token operator">=</span> <span class="token number">2</span>ISIF <span class="token operator">=</span> <span class="token number">2</span>VOSKOWN <span class="token operator">=</span> <span class="token number">1</span>ISPIN <span class="token operator">=</span> <span class="token number">2</span>MAGMOM <span class="token operator">=</span> <span class="token number">1.0</span> -1.0 <span class="token number">1.0</span> -1.0 <span class="token number">6</span>*0 <span class="token comment">#设置初始磁矩</span>LORBIT <span class="token operator">=</span> <span class="token number">11</span>LCHARG <span class="token operator">=</span> .FALSE.LWAVE <span class="token operator">=</span> .FALSE.EDIFF <span class="token operator">=</span> <span class="token number">0.00001</span>EDIFFG <span class="token operator">=</span> -0.001<span class="token assign-left variable">NPAR</span><span class="token operator">=</span><span class="token number">4</span>PREC <span class="token operator">=</span> A<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="SOC"><a href="#SOC" class="headerlink" title="SOC"></a>SOC</h3><p>需要使用vasp_ncl版本计算</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">LMAXMIX</span><span class="token operator">=</span><span class="token number">4</span>                <span class="token comment"># 4 for d, and 6 for f element</span>GGA_COMPAT <span class="token operator">=</span> .FALSE.     <span class="token comment"># 提高计算精度</span>MAGMOM <span class="token operator">=</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">1</span>            <span class="token comment"># 每个原子三个参数</span><span class="token comment">##SAXIS = x y z           #定义一个方向</span>ISYM <span class="token operator">=</span> <span class="token number">0</span>                  <span class="token comment">#一般不用对称性，以免出错</span>LNONCOLLINEAR <span class="token operator">=</span> .TRUE.    <span class="token comment"># 非线性</span>LSORBIT <span class="token operator">=</span> .TRUE.          <span class="token comment"># SOC</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>1. 非线性磁矩计算：【什么时候需要考虑非线性磁性计算？？】</strong><br>1）计算非磁性基态产生WAVECAR和CHGCAR文件（ISPIN=1？）。<br>2）然后INCAR中加上</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">ISPIN</span><span class="token operator">=</span><span class="token number">2</span><span class="token assign-left variable">ICHARG</span><span class="token operator">=</span><span class="token number">1</span> 或 <span class="token number">11</span>  <span class="token comment">#读取WAVECAR和CHGCAR文件</span><span class="token assign-left variable">LNONCOLLINEAR</span><span class="token operator">=</span>.TRUE.<span class="token assign-left variable">MAGMOM</span><span class="token operator">=</span>  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>注意：<br>①对于非线性磁矩计算，要在x, y 和 z方向分别加上磁矩，如<br>MAGMOM = 1 0 0  0 1 0  ！表示第一个原子在x方向，第二个原子的y方向有磁矩<br>②在任何时候，指定MAGMOM值的前提是ICHARG=2（没有WAVECAR和CHGCAR文件）或者ICHARG=1 或11（有WAVECAR和CHGCAR文件），但是前一步的计算是非磁性的（ISPIN=1）。</p><p><strong>2. 磁各向异性能（自旋轨道耦合）计算：</strong><br>注意： LSORBIT=.TRUE. 会自动打开LNONCOLLINEAR= .TRUE.选项，且自旋轨道计算只适用于PAW赝势，不适于超软赝势。<br>自旋轨道耦合效应<strong>就意味着能量对磁矩的方向存在依赖</strong>，即存在磁各向异性能（MAE），所以要定义初始磁矩的方向。如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">LSORBIT <span class="token operator">=</span> .TRUE.SAXIS <span class="token operator">=</span> s_x s_y s_z <span class="token punctuation">(</span>quantisation axis <span class="token keyword">for</span> spin<span class="token punctuation">)</span><span class="token comment">#默认值： SAXIS=(0+,0,1)，即x方向有正的无限小的磁矩，Z方向有磁矩。</span><span class="token comment">#要使初始的磁矩方向平行于选定方向，有以下两种方法：</span>MAGMOM <span class="token operator">=</span> x y z     <span class="token comment"># local magnetic moment in x,y,z</span>SAXIS <span class="token operator">=</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">1</span>      <span class="token comment">#quantisation axis parallel to z</span>orMAGMOM <span class="token operator">=</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token comment">#total_magnetic_moment</span><span class="token comment"># local magnetic moment parallel to SAXIS （注意每个原子分别指定）</span>SAXIS <span class="token operator">=</span> x y z <span class="token comment"># quantisation axis parallel to vector (x,y,z)，</span><span class="token comment"># 如 0 0 1  两种方法原则上应该是等价的，但是实际上第二种方法更精确。第二种方法允许读取已存在的WAVECAR（来自线性或者非磁性计算）文件，并且继续另一个自旋方向的计算（改变SAXIS 值而MAGMOM保持不变）。当读取一个非线性磁矩计算的WAVECAR时，自旋方向会指定平行于SAXIS。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>计算磁各向异性的推荐步骤是：</strong><br>1）首先计算线性磁矩以产生WAVECAR 和 CHGCAR文件（注意加入LMAXMIX，why?）。<br>2）然后INCAR中加入：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">LSORBIT <span class="token operator">=</span> .TRUE.ICHARG <span class="token operator">=</span> <span class="token number">11</span> <span class="token comment"># non selfconsistent run, read CHGCAR</span><span class="token comment">#或 ICHARG ==1 优化到易磁化轴，但此时应提高EDIFF的精度</span>LMAXMIX <span class="token operator">=</span> <span class="token number">4</span>  <span class="token comment"># for d elements increase LMAXMIX to 4, f: LMAXMIX = 6</span><span class="token comment"># you need to set LMAXMIX already in the collinear calculation</span>SAXIS <span class="token operator">=</span> x y z  <span class="token operator">!</span> direction of the magnetic field  如 <span class="token number">0</span> <span class="token number">0</span>  <span class="token number">1</span>NBANDS <span class="token operator">=</span> <span class="token number">2</span> * number of bands of collinear run  <span class="token comment"># grep NBANDS OUTCAR</span><span class="token assign-left variable">ISYM</span><span class="token operator">=</span><span class="token number">0</span>  <span class="token comment">#switch off symmetry (ISYM=0) when spin orbit coupling is selected</span><span class="token assign-left variable">GGA_COMPAT</span><span class="token operator">=</span>.FALSE. <span class="token comment"># it improves the numerical precision of GGA for non collinear calculations  </span><span class="token assign-left variable">LORBMOM</span><span class="token operator">=</span>.TRUE.  <span class="token comment">#计算轨道磁矩</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>继续计算，VASP会读取WAVECAR 和 CHGCAR将自旋量子化方向（磁场方向）平行于SAXIS方向。<br>最后可以比较各个方向磁矩时能量的不同。<br>注意： 第二步使用自洽计算(ICHARG=1)原则上也是可以的，但是初始平行于SAXIS的磁场发生旋转，直到达到基态，如平行于易磁化轴，但这个过程会很慢且能量变化很小，而且如果收敛标准不是很严格的话，自洽计算会在未达到基态就停止。<br> 注意： VASP的输入输出的磁矩和类自旋量都会按照这个SAXIS方向，包括INCAR中的<br>MAGMOM行，OUTCAR和PROCAR文件中的总磁矩和局域磁矩，WAVECAR中的类自旋轨道和CHGCAR中的磁性密度。</p><p>问题：<br> ①第一步线性计算得到WAVECAR 和 CHGCAR文件，必须是静态计算的WAVECAR 和 CHGCAR文件吗？ 动态优化的可不可以？静态计算需要使用NUPDOWN 锁定磁矩吗？<br>②进行非线性磁矩或自旋轨道耦合计算的时候，结构需不需要重新优化？  </p><p>我现在的做法是：<br>先加入LMAXMIX = 4结构优化，然后仍然使用 LMAXMIX = 4 静态计算<br>（ICHARG=2，LWAVE=.TRUE.,LCHARG=.TRUE.），<br>然后进行高收敛标准的静态的soc自洽计算来考虑soc的影响，也不知对不对。</p><h2 id="MD计算"><a href="#MD计算" class="headerlink" title="MD计算"></a>MD计算</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">SYSTEM <span class="token operator">=</span> CaCl-grapheneENCUT <span class="token operator">=</span> <span class="token number">520</span>IALGO  <span class="token operator">=</span> <span class="token number">48</span>ISTART <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ICHARG <span class="token operator">=</span> <span class="token number">2</span>ISMEAR <span class="token operator">=</span> <span class="token number">0</span>IBRION <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment">#模拟MD</span>ISIF <span class="token operator">=</span> <span class="token number">4</span>POTIM <span class="token operator">=</span> <span class="token number">1</span><span class="token assign-left variable">SIGMA</span><span class="token operator">=</span><span class="token number">0.05</span><span class="token assign-left variable">NSW</span><span class="token operator">=</span><span class="token number">10000</span><span class="token comment">#NBLOCK= 1   #多少个时间步长，写一次CONTCAR，CHG和CHGCAR，PCDAT</span><span class="token comment">#KBLOCK=50   #NBLOCK*KBLOCK 个步长写一次XDATCAR</span><span class="token assign-left variable">NELMIN</span><span class="token operator">=</span><span class="token number">8</span>     <span class="token comment">#一般用6到8, 最小的电子scf数.太少的话,收敛的不好</span><span class="token assign-left variable">LREAL</span><span class="token operator">=</span>A<span class="token comment">#APACO=10    #径向分布函数距离, 单位是埃</span><span class="token comment">#NPACO=200   #径向分布函数插的点数.</span><span class="token assign-left variable">TEBEG</span><span class="token operator">=</span><span class="token number">300</span><span class="token assign-left variable">TEEND</span><span class="token operator">=</span><span class="token number">300</span>SMASS <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">#NVT  # -3,NVE;-1,NVE可以控温，模拟退火；>0，NVT系综</span>EDIFF <span class="token operator">=</span> 1E-5<span class="token comment">#EDIFFG = -0.05</span><span class="token comment">#NPAR=4</span>PREC <span class="token operator">=</span> Normal<span class="token assign-left variable">LWAVE</span><span class="token operator">=</span>.F<span class="token assign-left variable">LCHARG</span><span class="token operator">=</span>.F<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="能带-态密度计算"><a href="#能带-态密度计算" class="headerlink" title="能带/态密度计算"></a>能带/态密度计算</h2><p><strong>Scf-INCAR 重点参数</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">IBRION <span class="token operator">=</span> -1NSW <span class="token operator">=</span> <span class="token number">0</span>LCHARG <span class="token operator">=</span> .TRUE.LWAVE <span class="token operator">=</span> .TRUE.<span class="token assign-left variable">LORBIT</span><span class="token operator">=</span><span class="token number">11</span>ISMEAR <span class="token operator">=</span> -5 <span class="token comment">#（k 点大于4 ） or 1 or 0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Dos-INCAR 重点参数</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">NBANDS</span><span class="token operator">=</span>XXX<span class="token assign-left variable">LORBIT</span><span class="token operator">=</span><span class="token number">11</span><span class="token assign-left variable">ISTART</span><span class="token operator">=</span><span class="token number">1</span><span class="token assign-left variable">ICHARG</span><span class="token operator">=</span><span class="token number">11</span><span class="token assign-left variable">EMIN</span><span class="token operator">=</span> -20<span class="token assign-left variable">EMAX</span><span class="token operator">=</span> <span class="token number">20</span><span class="token assign-left variable">NEDOS</span><span class="token operator">=</span><span class="token number">1000</span>ISMEAR <span class="token operator">=</span> -5 （k 点大于4 ） or <span class="token number">1</span> or <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>VASP纯泛函能带计算思路：</strong></p><p>（1）在布里渊区撒点K-mesh做自洽计算得到CHGCAR文件；<br>（2）读取上一步的CHGCAR（ICHARG = 11）, 用line-mode形式的K-path, 用VASPKIT 303生成KPOINTS,，做非自恰计算（电荷密度保持不变），得到line-mode上的每个K点的能级，从而得到能带。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">NBANDS</span><span class="token operator">=</span>XXX<span class="token assign-left variable">LORBIT</span><span class="token operator">=</span><span class="token number">11</span><span class="token assign-left variable">ISTART</span><span class="token operator">=</span><span class="token number">1</span><span class="token assign-left variable">ICHARG</span><span class="token operator">=</span><span class="token number">11</span><span class="token assign-left variable">EMIN</span><span class="token operator">=</span> -20<span class="token assign-left variable">EMAX</span><span class="token operator">=</span> <span class="token number">20</span><span class="token assign-left variable">NEDOS</span><span class="token operator">=</span><span class="token number">1000</span>NBANDS <span class="token operator">=</span> <span class="token number">16</span> <span class="token comment">#对于体系较大的半导体，我们通常在算dos 和band structure 时需要增加能带数目(20%) </span><span class="token assign-left variable">ISMEAR</span><span class="token operator">=</span><span class="token number">0</span> or <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>VASP计算杂化泛函</strong>的能带，不能直接读取纯泛函的CHGCAR文件做非自恰计算，所以不能直接用line-mode的KPOINTS。计算思路如下：<br>（1）用VASPKIT303和251产生KPOINTS文件，同时包含布里渊区撒点的K点K-mesh和高对称点连线K-path。K-mesh使用正常的权重，K-path使用0权重。<br>（2）（可省略）用纯泛函(比如PBE)基于(1)KPOINTS文件做自洽计算，产生WAVECAR文件用于加速下一步杂化泛函计算的收敛。<br>（3）用杂化泛函(比如HSE06)基于(1)KPOINTS文件做自洽计算，直接得到每个K-path上每个0权重的K点的能级信息，从而得到能带信息。</p><h2 id="杂化泛函"><a href="#杂化泛函" class="headerlink" title="杂化泛函"></a>杂化泛函</h2><p>HSE06泛函： a=0.25，ωω=0.2，</p><p>HSE03泛函： a=0.25，ωω=0.3，</p><p>PBE0泛函： a=0.25，ωω -&gt; 0，</p><p>PBE泛函：a=0，ωω -&gt; \infinite，  <strong>LHFCALC控制是否做杂化泛函计算，HFSCREEN控制ω。</strong></p><p><strong>HSE06</strong>计算需要添加的参数如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">LHFCALC <span class="token operator">=</span> .TRUE. <span class="token punctuation">;</span> HFSCREEN <span class="token operator">=</span> <span class="token number">0.2</span>ALGO <span class="token operator">=</span> Damped <span class="token punctuation">;</span> TIME <span class="token operator">=</span> <span class="token number">0.4</span><span class="token comment"># PRECFOCK  = Fast  ! used PRECFOCK = Normal for high quality calculations</span><span class="token comment"># NKRED     = 2     ! omit flag for high quality calculations</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>HSE03</strong>计算需要添加的参数如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">FCALC  <span class="token operator">=</span> .TRUE.ALGO <span class="token operator">=</span> Damped <span class="token punctuation">;</span> TIME <span class="token operator">=</span> <span class="token number">0.4</span>HFSCREEN <span class="token operator">=</span> <span class="token number">0.3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>PBE0</strong>计算需要添加的参数如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">LHFCALC <span class="token operator">=</span> .TRUE.ALGO <span class="token operator">=</span> Damped <span class="token punctuation">;</span> TIME <span class="token operator">=</span> <span class="token number">0.4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>B3LYP</strong>计算需要添加的参数如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">LHFCALC <span class="token operator">=</span> .TRUE. GGA     <span class="token operator">=</span> B3 AEXX    <span class="token operator">=</span> <span class="token number">0.2</span>AGGAX   <span class="token operator">=</span> <span class="token number">0.72</span> AGGAC   <span class="token operator">=</span> <span class="token number">0.81</span> ALDAC   <span class="token operator">=</span> <span class="token number">0.19</span>ALGO <span class="token operator">=</span> Damped <span class="token punctuation">;</span> TIME <span class="token operator">=</span> <span class="token number">0.4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Hartree-Fock</strong>计算需要添加的参数如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">LHFCALC <span class="token operator">=</span> .TRUE. AEXX    <span class="token operator">=</span> <span class="token number">1.0</span>ALDAC   <span class="token operator">=</span> <span class="token number">0.0</span> AGGAC   <span class="token operator">=</span> <span class="token number">0.0</span>ALGO <span class="token operator">=</span> Damped <span class="token punctuation">;</span> TIME <span class="token operator">=</span> <span class="token number">0.4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>综上一般HSE06的计算输入文件可以写为：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">##### initial I/O #####</span>SYSTEM <span class="token operator">=</span> Hybird Functional<span class="token comment"># KPAR = 4       </span>NCORE <span class="token operator">=</span> <span class="token number">5</span> ISTART <span class="token operator">=</span> <span class="token number">1</span> ICHARG <span class="token operator">=</span> <span class="token number">1</span> LWAVE <span class="token operator">=</span> .TRUE. LCHARG <span class="token operator">=</span> .TRUE.LVTOT <span class="token operator">=</span> .FALSE.LVHAR <span class="token operator">=</span> .FALSE.LELF <span class="token operator">=</span> .FALSE. LORBIT <span class="token operator">=</span> <span class="token number">11</span> NEDOS <span class="token operator">=</span> <span class="token number">1000</span><span class="token comment">##### SCF #####</span>ENCUT <span class="token operator">=</span> <span class="token number">500</span>ISMEAR <span class="token operator">=</span> <span class="token number">0</span> SIGMA <span class="token operator">=</span> <span class="token number">0.05</span>EDIFF <span class="token operator">=</span> 1E-6NELMIN <span class="token operator">=</span> <span class="token number">5</span> NELM <span class="token operator">=</span> <span class="token number">300</span> GGA <span class="token operator">=</span> PE LREAL <span class="token operator">=</span> .FALSE.<span class="token comment"># PREC = Accurate</span><span class="token comment"># ISYM = 3</span><span class="token comment">##### Geo opt #####</span>EDIFFG <span class="token operator">=</span> -0.01IBRION <span class="token operator">=</span> <span class="token number">2</span>POTIM <span class="token operator">=</span> <span class="token number">0.2</span> NSW <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment"># no Geo_opt</span>ISIF <span class="token operator">=</span> <span class="token number">3</span>  <span class="token comment"># 2 not optimize cell</span><span class="token comment">#### HSE ####</span>LHFCALC <span class="token operator">=</span> .TRUE. AEXX   <span class="token operator">=</span>  <span class="token number">0.25</span>        HFSCREEN <span class="token operator">=</span> <span class="token number">0.2</span>         ALGO <span class="token operator">=</span> ALL <span class="token comment"># or Damped</span>TIME   <span class="token operator">=</span>  <span class="token number">0.4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其他参数：<br>AGGAX = 1.0-AEXX，交换泛函中的GGA的成分<br>AGGAC = 1.0，相关泛函中的GGA的成分<br>ALDAC = 1.0 ，相关泛函中的LDA的成分</p><h2 id="外加电场"><a href="#外加电场" class="headerlink" title="外加电场"></a>外加电场</h2><p>EFIELD控制电场力的大小（eV/Angstrom）。F=qE 所以对应电场的单位是E=F/q， 因而场强单位是 <em>V/Angstrom</em></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">EFIELD <span class="token operator">=</span> <span class="token number">0.05</span>IDIPOL <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">#1/2/3代表x/y/z方向</span>LDIPOL <span class="token operator">=</span> .TRUE.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>一开始电场不要加的太大，电场的强度逐渐加上去。比如一开始做一个电场强度很小的计算，得到了收敛的电荷密度和波函数之后，再增加电场强度，读入上一步的电荷和波函数进行计算。。。。。这样的方式逐渐增加电场强度。<br>另外也要注意，这里所加的电场所能处理的体系，即电场的方向上是要有真空层的。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ISTART <span class="token operator">=</span> <span class="token number">1</span>ICHARG <span class="token operator">=</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="Bader电荷计算"><a href="#Bader电荷计算" class="headerlink" title="Bader电荷计算"></a>Bader电荷计算</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">LAECHG <span class="token operator">=</span> .TRUE. （静态计算）<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>增加网格 NGXF NGYF NGZF</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">1</span>. chgsum.pl  AECCAR0   AECCAR2   <span class="token operator">></span>   CHGCAR_sum<span class="token number">2</span>. bader  CHGCAR   -ref  CHGCAR_sum<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>生成 <strong>ACF.data</strong>, AVF.dat,   BCF.dat</p><h2 id="频率计算"><a href="#频率计算" class="headerlink" title="频率计算"></a>频率计算</h2><p>INCAR：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">IBRION <span class="token operator">=</span> <span class="token number">5</span>POTIM <span class="token operator">=</span> <span class="token number">0.015</span> <span class="token comment">#或者0.01-0.02范围的值都可，闲的没事也可以测试下。</span>NFREE <span class="token operator">=</span> <span class="token number">2</span>NSW <span class="token operator">=</span> <span class="token number">1</span>   <span class="token comment">#1-10000的值均可，没事也可以测试下</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>POSCAR: 将表面的原子固定住，使用sed命名，或者自己写个小脚本来处理。<br>KPOINTS，一般来说，很多人都使用和优化过程一样的KPOINTS，但从我个人的经验来看，使用更小的K点来计算则是一个更加有效，节约机时的做法。但前提是你要做足够的测试。<br>如果收敛困难的体系，可以保存优化步骤的WAVECAR用于下一步的频率计算。</p><h2 id="声子谱计算"><a href="#声子谱计算" class="headerlink" title="声子谱计算"></a>声子谱计算</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">SYSTEM <span class="token operator">=</span> N2PENCUT <span class="token operator">=</span> <span class="token number">520</span>IALGO  <span class="token operator">=</span> <span class="token number">38</span><span class="token comment">#ISTART = 0; ICHARG = 2</span>ISMEAR <span class="token operator">=</span> <span class="token number">0</span><span class="token assign-left variable">SIGMA</span><span class="token operator">=</span><span class="token number">0.05</span><span class="token assign-left variable">NSW</span><span class="token operator">=</span><span class="token number">1</span><span class="token comment">#PRECSYM=0.01</span>IBRION <span class="token operator">=</span> <span class="token number">8</span>VOSKOWN <span class="token operator">=</span> <span class="token number">1</span>ISIF <span class="token operator">=</span> <span class="token number">2</span>ISPIN <span class="token operator">=</span> <span class="token number">2</span>LWAVE <span class="token operator">=</span> .FALSELCHARG <span class="token operator">=</span> .FALSELREAL  <span class="token operator">=</span> .FALSE.ADDGRID <span class="token operator">=</span> .TRUE<span class="token comment">#ISPIN=2</span>EDIFF <span class="token operator">=</span> 1E-7EDIFFG <span class="token operator">=</span> -0.001（不能是负值吗？）PREC <span class="token operator">=</span> A<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> <strong>数据处理</strong></p><p><strong>a) 根据vasprun.xml文件生成力学文件FORCE_CONSTRAINS</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">phonopy --fc vasprun.xml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>b) 编辑band.conf文件，该文件给出了高对称点路径的信息</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ATOM_NAME <span class="token operator">=</span> In SeDIM <span class="token operator">=</span> <span class="token number">4</span> <span class="token number">4</span> <span class="token number">1</span>BAND <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token number">0.0</span> <span class="token number">0.0</span>  <span class="token number">0.0</span> <span class="token number">0.0</span> <span class="token number">0.0</span>  <span class="token number">0.333333</span> <span class="token number">0.333333</span> <span class="token number">0.0</span>  <span class="token number">0.5</span> <span class="token number">0.0</span> <span class="token number">0.0</span>FORCE_CONSTANTS <span class="token operator">=</span> READ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>Note：<br>line 1：元素名称，顺序与POSCAR保持一致<br>line 2：建立超胞的大小<br>line 3：高对称点路径，每组高对称点之间用两个空格隔开<br>line 4：表示读取力常数文件FORCE_CONSTANTS</p><p><strong>c) 生成band.yaml文件</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">phonopy --dim<span class="token operator">=</span><span class="token string">"4 4 1"</span> -c POSCAR-unitcell band.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">phonopy --dim<span class="token operator">=</span><span class="token string">"3 3 1"</span> -c  POSCAR-unitcell -p band.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>Note：4 4 1为建立超胞的大小</p><p><strong>d) 得到声子谱数据文件PBAND.dat文件</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">phonopy-bandplot  --gnuplot<span class="token operator">></span> PBAND.dat<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>Note: 高对称点标注说明：phonopy软件默认在两个高对称点之间打点51个，且在PBAND.dat中每组高对称点数据以一个空行分割，据此即可得到完整的声子谱图像</p><h2 id="弹性常数计算"><a href="#弹性常数计算" class="headerlink" title="弹性常数计算"></a>弹性常数计算</h2><p>方法一：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">SYSTEM <span class="token operator">=</span>SiISTART <span class="token operator">=</span> <span class="token number">0</span>ICHARG <span class="token operator">=</span> <span class="token number">2</span><span class="token assign-left variable">PREC</span><span class="token operator">=</span>Accurate <span class="token comment">#精度提高</span>LREAL <span class="token operator">=</span> .F.IBRION <span class="token operator">=</span> <span class="token number">6</span>  <span class="token comment">#计算弹性常数</span><span class="token assign-left variable">ISIF</span><span class="token operator">=</span><span class="token number">3</span>          <span class="token comment">#计算弹性常数</span><span class="token assign-left variable">NFREE</span><span class="token operator">=</span><span class="token number">4</span>     <span class="token comment">#计算弹性常数</span>NSW <span class="token operator">=</span> <span class="token number">100</span>POTIM <span class="token operator">=</span> <span class="token number">0.5</span>EDIFFG <span class="token operator">=</span>-0.02ENCUT <span class="token operator">=</span><span class="token number">500</span> eV   <span class="token comment">#精度提高</span>SPIN <span class="token operator">=</span> <span class="token number">1</span>NELM <span class="token operator">=</span> <span class="token number">60</span>EDIFF <span class="token operator">=</span> <span class="token number">0</span>.1E-04LCHARG <span class="token operator">=</span> .F.LWAVE <span class="token operator">=</span> .F.ISMEAR <span class="token operator">=</span> <span class="token number">0</span>SIGMA <span class="token operator">=</span> <span class="token number">0.2</span><span class="token assign-left variable">ALGO</span><span class="token operator">=</span>FastPSTRESS <span class="token operator">=</span><span class="token number">0</span> （0Pa） <span class="token comment">#单位为 0.1Gpa</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>方法二：</p><p>VASPKIT和VASP计算晶体的弹性常数具体计算步骤分为：<br>1，准备优化彻底的POSCAR文件，注意通常采用标准的惯用原胞计算弹性常数，如果不确信POSCAR文件中是否是标准的惯用原胞，可以用VASPKIT-603/604生成标准结构；<br>2，运行VASPKIT 选择102生成KPOINTS，由于计算弹性常数对K-mesh要求很高，因此对于半导体（金属体）体系，生成K点的精度应不小于0.03(0.02)×2π0.03(0.02)×2π \AA−1\AA−1<br>3，INCAR参考设置如下；</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Global Parameters  ISTART <span class="token operator">=</span>  <span class="token number">0</span>          LREAL  <span class="token operator">=</span>  F        PREC   <span class="token operator">=</span>  High  <span class="token comment">#（截断能设置默认值1.5-2倍）</span>  LWAVE  <span class="token operator">=</span> F         LCHARG <span class="token operator">=</span> F       <span class="token assign-left variable">ADDGRID</span><span class="token operator">=</span> .TRUE.    <span class="token comment">#Electronic Relaxation</span>  ISMEAR <span class="token operator">=</span>  <span class="token number">0</span>            SIGMA  <span class="token operator">=</span>  <span class="token number">0.05</span>         NELM   <span class="token operator">=</span>  <span class="token number">40</span>             NELMIN <span class="token operator">=</span>  <span class="token number">4</span>             EDIFF  <span class="token operator">=</span>  1E-08       <span class="token comment">#Ionic Relaxation</span>  NELMIN <span class="token operator">=</span>  <span class="token number">6</span>            NSW    <span class="token operator">=</span>  <span class="token number">100</span>           IBRION <span class="token operator">=</span>  <span class="token number">2</span>             ISIF   <span class="token operator">=</span>  <span class="token number">2</span>    <span class="token comment">#（切记选择2,如果选择3会把施加应变后原胞重新优化成平衡原胞）</span>  EDIFFG <span class="token operator">=</span> -1E-02<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>4，准备VPKIT.in文件并设置第一行为1（预处理）；运行VASPKIT并选择201, 将生成用于计算弹性常数文件；</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">1</span>                    <span class="token operator">!</span> 设置1将产生计算弹性常数的输入文件，2则计算弹性常数3D                   <span class="token operator">!</span> 2D为二维体系，3D为三维体系<span class="token number">7</span>                    <span class="token operator">!</span> <span class="token number">7</span>个应变-0.015 -0.010 -0.005 <span class="token number">0.000</span> <span class="token number">0.005</span> <span class="token number">0.010</span> <span class="token number">0.015</span>  <span class="token operator">!</span> 应变变化范围<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>运行VASPKIT 201后输出一下信息，在批量提交任务；</p><p>5.任务完成后，VPKIT.in第一行改为2；再运行vaspkit 201 即可。算出来的弹性系数要乘上真空层高度。</p><h2 id="光学性质计算"><a href="#光学性质计算" class="headerlink" title="光学性质计算"></a>光学性质计算</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ISTART <span class="token operator">=</span> <span class="token number">1</span><span class="token assign-left variable">ICHARG</span><span class="token operator">=</span><span class="token number">10</span>            <span class="token comment">#非自洽计算，读取scf计算得到的CHG</span>LOPTICS <span class="token operator">=</span> .TRUE.    <span class="token comment">#计算光学性质</span>CSHIFT <span class="token operator">=</span> <span class="token number">0.1</span>            <span class="token comment">#实部光响应的偏移量</span><span class="token assign-left variable">PREC</span><span class="token operator">=</span>Accurate        <span class="token comment">#计算光学性质需提高精度</span><span class="token assign-left variable">NBANDS</span><span class="token operator">=</span><span class="token number">160</span>          <span class="token comment">#半导体计算光学性质应为本身bands的2-3倍</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="压电常数计算"><a href="#压电常数计算" class="headerlink" title="压电常数计算"></a>压电常数计算</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">LEPSILON</span><span class="token operator">=</span>.TRUE.<span class="token assign-left variable">IBRION</span><span class="token operator">=</span> <span class="token number">8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>半导体、绝缘体压电计算步骤：</strong></p><p><strong>先建一系列结构；</strong></p><p><strong>clamped-ion计算：直接静态计算</strong></p><p><strong>relaxed-ion计算：先用ISIF=2优化，再静态计算,静态计算中加入</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">DIPOL <span class="token operator">=</span> <span class="token number">0.25</span> <span class="token number">0.25</span> <span class="token number">0.25</span>LCALCPOL <span class="token operator">=</span> .TRUE.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>手动计算极化时，NGX、NGY、NGZ必须相同，否则对电偶极矩的积分结果会出错。</strong></p><h2 id="模拟STM"><a href="#模拟STM" class="headerlink" title="模拟STM"></a>模拟STM</h2><ol><li>优化结构</li><li>SCF计算，得到波函数和电荷密度文件</li><li>PARCHG 文件 生成，这个文件结构和CHGCAR一样</li></ol><p>a) 加的参数 LPARD=.TRUE. 这个参数计算 PARCHG 部分电荷 决定性的参数 NBMOD=-3 决定性的参数 EINT=-0.1 能量的间隙具体的参数含义参看说明书<br>b) 加入INCAR 参数设置如下</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">LPARD</span><span class="token operator">=</span>.TRUE. <span class="token assign-left variable">NBMOD</span><span class="token operator">=</span>-3 <span class="token assign-left variable">EINT</span><span class="token operator">=</span>-0.1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>正负偏压相对于sample，如果是正的，则fermi level 会降低，EINT=正值，如果是负偏压，则相反。</p><p>在INCAR里面设置： STM= STM1 STM2 STM3 STM4 STM5 STM1 最小Z坐标 STM2 最大Z坐标 = STM1+ 49.5 * STM3<br>STM3 Z坐标之间的间隔 STM4 G矢量的截断能，既考虑到H<em>2G</em>2/me &lt; |STM4|的波失。<br>当此值为负时，在波函数上讲做一个窗函数：STM(4) STM(5) 费米能及附近的能量窗（一个范围）及考虑Eferm ± STM(5)eV 能量窗内的波函数，为了保证有50 个Z点，STM2取为 STM1+ 49.5 * STM3。</p><ol start="4"><li>当有了PARCHG 文件，就可以用看图软件看了，一般的有vesta p4vasp</li></ol><h2 id="带分解电荷密度"><a href="#带分解电荷密度" class="headerlink" title="带分解电荷密度"></a>带分解电荷密度</h2><p>第一种Partial Charge分析的INCAR，这样的INCAR给出的是指定能带，指定K点所对应的Partial Charge。分析导带、价带等的Partial Charge特性，通常采用的都是这种模式。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ISTART <span class="token operator">=</span>      <span class="token number">1</span>    <span class="token comment">#（job   : 0-new  1-cont  2-samecut</span>ICHARG <span class="token operator">=</span>      <span class="token number">1</span>    <span class="token comment"># charge: 1-file 2-atom 10-const）</span><span class="token assign-left variable">LPARD</span><span class="token operator">=</span>.TRUE.<span class="token assign-left variable">IBAND</span><span class="token operator">=</span> <span class="token number">20</span> <span class="token number">21</span> <span class="token number">22</span> <span class="token number">23</span> <span class="token comment">#（能带的序号，即第几条）</span><span class="token assign-left variable">KPUSE</span><span class="token operator">=</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span>  <span class="token comment">#（某段能带（两个高对称点间）之间的第几个K点，在KPOINTS中需要输入这两个高对称点的坐标）</span><span class="token assign-left variable">LSEPB</span><span class="token operator">=</span>.TRUE.<span class="token assign-left variable">LSEPK</span><span class="token operator">=</span>.TRUE.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>第二种Partial Charge分析的INCAR，这样的INCAR给出的是在[-10.3 -5.1]能量之间的Partial Charge。这种模式适合于分析某个能量区间内的波函数的性质。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ISTART <span class="token operator">=</span>      <span class="token number">1</span>    <span class="token comment">#（job   : 0-new  1-cont  2-samecut</span>ICHARG <span class="token operator">=</span>      <span class="token number">1</span>     <span class="token comment"># charge: 1-file 2-atom 10-const）</span><span class="token assign-left variable">LPARD</span><span class="token operator">=</span>.TRUE.EINT <span class="token operator">=</span> -10.3 -5.1<span class="token assign-left variable">LSEPB</span><span class="token operator">=</span>.FALSE.<span class="token assign-left variable">LSEPK</span><span class="token operator">=</span>.FALSE.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>第三种Partial Charge分析的INCAR，这样的INCAR给出的是从[Ef-1.0 Ef]能量之间的Partial Charge。这种模式最利于分析费米面附近的波函数的性质。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ISTART <span class="token operator">=</span>      <span class="token number">1</span>    <span class="token comment">#（job   : 0-new  1-cont  2-samecut</span>ICHARG <span class="token operator">=</span>      <span class="token number">1</span>     <span class="token comment"># charge: 1-file 2-atom 10-const）</span><span class="token assign-left variable">LPARD</span><span class="token operator">=</span>.TRUE.<span class="token assign-left variable">NBMOD</span><span class="token operator">=</span>-3EINT <span class="token operator">=</span> -1<span class="token assign-left variable">LSEPB</span><span class="token operator">=</span>.FALSE.<span class="token assign-left variable">LSEPK</span><span class="token operator">=</span>.FALSE.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>计算能带的部分电荷密度时，除了所需的四个文件（INCAR、KPOINTS、POSCAR、POTCAR），还需将WAVECAR、CHGCAR拷入文件夹。在INCAR中加入上述第一种情况的那些参数，在KPOINTS中修改成该条能带中某两个高对称点的坐标。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;INCAR设置&quot;&gt;&lt;a href=&quot;#INCAR设置&quot; class=&quot;headerlink&quot; title=&quot;INCAR设置&quot;&gt;&lt;/a&gt;INCAR设置&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;金属&lt;/strong&gt;：ISMEAR = 1; SIGMA = 0.2（grep “</summary>
      
    
    
    
    <category term="DFT" scheme="https://zhangquan2018.github.io/categories/DFT/"/>
    
    
    <category term="VASP" scheme="https://zhangquan2018.github.io/tags/VASP/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://zhangquan2018.github.io/2021/03/14/hello-world/"/>
    <id>https://zhangquan2018.github.io/2021/03/14/hello-world/</id>
    <published>2021-03-14T14:18:30.613Z</published>
    <updated>2021-03-16T12:28:12.180Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
    <category term="hexo" scheme="https://zhangquan2018.github.io/tags/hexo/"/>
    
  </entry>
  
</feed>
